<?xml version="1.0" encoding="utf-8" ?>

<book xmlns="http://docbook.org/ns/docbook" version="5.0" id="spruce">
	<bookinfo>
		<title>Spruce</title>
		<author>
			<firstname>Vahram</firstname>
			<surname>Martirosyan</surname>
		</author>
		<copyright>
			<year>2011</year>
			<holder>Institute for System Programming of the Russian Academy of Sciences (ISPRAS)</holder>
		</copyright>
	</bookinfo>
	<chapter id="overview">
		<info>
			<title>Overview</title>
		</info>
		<para>
			Spruce is a Linux file system checker. It consists of the following modules:
			<itemizedlist mark="square">
				<listitem><olink targetdoc="main" >Main module</olink> </listitem>
				<listitem><olink targetdoc="syscall" >Syscall checker module</olink> </listitem>
				<listitem><olink targetdoc="common" >Common operations module</olink> </listitem>
				<listitem><olink targetdoc="benchmark" >Benchmark module</olink>  </listitem>
				<listitem><olink targetdoc="main" >Main module</olink> </listitem>
				<listitem>and a set of file system specific modules: 
					<itemizedlist>
						<listitem><olink targetdoc="ext4fs" >Ext4 FS module</olink></listitem>
						<listitem><olink targetdoc="btrfs" >BTRFS module</olink></listitem>
					</itemizedlist>
				</listitem>
			</itemizedlist>
		</para>	
	</chapter>
	<chapter id="installation">
		<info>
			<title>Installation</title>
		</info>
		<para>			
			The Spruce project sources can be found on it's Google Code repository: <emphasis role="bold">https://code.google.com/p/spruce/</emphasis>. It can be accessed through the Mercurial system: 
			<emphasis role="bold">hg clone https://spruce.googlecode.com/hg/ spruce</emphasis>
		</para>
		<para>
			If the sources are situated in folder /some/path/spruce_XXX, then create a build folder like /some/path/build:
		</para>
		<para>
			<emphasis role="bold">mkdir /some/path/build</emphasis>.
		</para>
		<para>The project is configured by the CMake system (http://www.cmake.org). If it is not installed, please download and install it previously. Now the Spruce project can be configured. Execute the following command: 
		</para>
		<para>
			<emphasis role="bold">cmake ../spruce_XXX</emphasis>.
		</para>
		<para>
			Carefully read the output and in case of any errors fix them (there can be some required packages missing on your system, or some version mismatch or something else). If the configuration step has passed with no error then make the project executing:
		</para>
		<para>
			<emphasis role="bold">make -j &lt;number_of_processors&gt;</emphasis>.
		</para>
		<para>
			If there are no errors during the make process the Spruce project can be installed. Execute the following command to install it:
		</para>
		<para>
			<emphasis role="bold">sudo make install</emphasis>.
		</para>
		<para>
			To ensure that the basic functionality is there execute the check:
		</para>
		<para>
			<emphasis role="bold">sudo make check</emphasis>.
		</para>
	</chapter>
</book>
