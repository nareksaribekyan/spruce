CMAKE_MINIMUM_REQUIRED(VERSION 2.6)

MESSAGE("Configuring project benchmark BINARYs")
PROJECT (Spruce)

INCLUDE_DIRECTORIES(${CMAKE_BINARY_DIR}/include)
INCLUDE_DIRECTORIES(${CMAKE_BINARY_DIR}/src/syscall/include)

ADD_SUBDIRECTORY(dup)
INCLUDE_DIRECTORIES(${CMAKE_BINARY_DIR}/src/syscall/dup)

ADD_SUBDIRECTORY(read_write)
INCLUDE_DIRECTORIES(${CMAKE_BINARY_DIR}/src/syscall/read_write)

ADD_SUBDIRECTORY(close)
INCLUDE_DIRECTORIES(${CMAKE_BINARY_DIR}/src/syscall/close)

ADD_SUBDIRECTORY(fcntl)
INCLUDE_DIRECTORIES(${CMAKE_BINARY_DIR}/src/syscall/fcntl)

ADD_SUBDIRECTORY(link)
INCLUDE_DIRECTORIES(${CMAKE_BINARY_DIR}/src/syscall/link)

ADD_SUBDIRECTORY(chmod)
INCLUDE_DIRECTORIES(${CMAKE_BINARY_DIR}/src/syscall/chmod)

ADD_SUBDIRECTORY(ioctl)
INCLUDE_DIRECTORIES(${CMAKE_BINARY_DIR}/src/syscall/ioctl)

ADD_SUBDIRECTORY(getdents)
INCLUDE_DIRECTORIES(${CMAKE_BINARY_DIR}/src/syscall/getdents)

ADD_SUBDIRECTORY(rename)
INCLUDE_DIRECTORIES(${CMAKE_BINARY_DIR}/src/syscall/rename)

ADD_SUBDIRECTORY(creat)
INCLUDE_DIRECTORIES(${CMAKE_BINARY_DIR}/src/syscall/creat)

ADD_SUBDIRECTORY(unlink)
INCLUDE_DIRECTORIES(${CMAKE_BINARY_DIR}/src/syscall/unlink)

ADD_SUBDIRECTORY(unlinkat)
INCLUDE_DIRECTORIES(${CMAKE_BINARY_DIR}/src/syscall/unlinkat)


ADD_EXECUTABLE(syscall ${CMAKE_CURRENT_BINARY_DIR}/main.cpp)
TARGET_LINK_LIBRARIES(syscall utils)
TARGET_LINK_LIBRARIES(syscall dup)
TARGET_LINK_LIBRARIES(syscall close)
TARGET_LINK_LIBRARIES(syscall chmod)
TARGET_LINK_LIBRARIES(syscall link)
TARGET_LINK_LIBRARIES(syscall read_write)
TARGET_LINK_LIBRARIES(syscall fcntl)
TARGET_LINK_LIBRARIES(syscall rt)
TARGET_LINK_LIBRARIES(syscall ioctl)
TARGET_LINK_LIBRARIES(syscall getdents)
TARGET_LINK_LIBRARIES(syscall rename)
TARGET_LINK_LIBRARIES(syscall creat)
TARGET_LINK_LIBRARIES(syscall unlink)
TARGET_LINK_LIBRARIES(syscall unlinkat)


CONFIGURE_FILE(${CMAKE_CURRENT_SOURCE_DIR}/main.cpp ${CMAKE_CURRENT_BINARY_DIR}/main.cpp)

install (	FILES "${CMAKE_BINARY_DIR}/bin/syscall"
			DESTINATION bin
			PERMISSIONS OWNER_EXECUTE OWNER_WRITE OWNER_READ GROUP_EXECUTE GROUP_READ WORLD_EXECUTE WORLD_READ)
